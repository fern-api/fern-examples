# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

types:
  Movie:
    properties:
      id: commons.MovieId # We are referencing a type (MovieId) defined in another file (commons.yml). 
      title: string
      rating: 
        type: double
        docs: The rating scale is one to five stars

  CreateMovieRequest: 
    properties:
      title: string
      rating: double 

services:
  http:
  
    MoviesService:
      auth: false
      base-path: /movies
      endpoints:

        # Here's an HTTP endpoint
        createMovie:
          docs: Add a movie to the database
          method: POST
          path: /create-movie
          request: CreateMovieRequest
          response: commons.MovieId

        getMovie:
          method: GET
          path: /{movieId}
          path-parameters:
            movieId: commons.MovieId
          response: Movie
          errors:
            - NotFoundError

errors:
  NotFoundError:
    http:
      statusCode: 404